!function(e){"use strict";var o,t,a,i,s,n,c,r,d,l,v,u,b,p,m,f,h,g,k,x,y,w,C,_,B,P,E,O,D,M,N,U,V,z,R,X,Y,j,W;e.fn.extend({venobox:function(q){var $=this,I=e.extend({arrowsColor:"#B6B6B6",autoplay:!1,bgcolor:"#fff",border:"0",closeBackground:"#161617",closeColor:"#d2d2d2",framewidth:"",frameheight:"",infinigall:!1,htmlClose:"&times;",htmlNext:"<span>Next</span>",htmlPrev:"<span>Prev</span>",numeratio:!1,numerationBackground:"#161617",numerationColor:"#d2d2d2",numerationPosition:"top",overlayClose:!0,overlayColor:"rgba(23,23,23,0.85)",spinner:"double-bounce",spinColor:"#d2d2d2",titleattr:"title",titleBackground:"#161617",titleColor:"#d2d2d2",titlePosition:"top",cb_pre_open:function(){return!0},cb_post_open:function(){},cb_pre_close:function(){return!0},cb_post_close:function(){},cb_post_resize:function(){},cb_after_nav:function(){},cb_init:function(){}},q);return I.cb_init($),this.each((function(){function q(){x=E.data("gall"),f=E.data("numeratio"),u=E.data("infinigall"),b=e('.vbox-item[data-gall="'+x+'"]'),y=b.eq(b.index(E)+1),w=b.eq(b.index(E)-1),y.length||!0!==u||(y=b.eq(0)),b.length>1?(O=b.index(E)+1,a.html(O+" / "+b.length)):O=1,!0===f?a.show():a.hide(),""!==k?i.show():i.hide(),y.length||!0===u?(e(".vbox-next").css("display","block"),C=!0):(e(".vbox-next").css("display","none"),C=!1),b.index(E)>0||!0===u?(e(".vbox-prev").css("display","block"),_=!0):(e(".vbox-prev").css("display","none"),_=!1),(!0===_||!0===C)&&(c.on(ae.DOWN,S),c.on(ae.MOVE,T),c.on(ae.UP,Z))}function A(e){return!(e.length<1)&&(!p&&(p=!0,h=e.data("overlay")||e.data("overlaycolor"),l=e.data("framewidth"),v=e.data("frameheight"),s=e.data("border"),t=e.data("bgcolor"),r=e.data("href")||e.attr("href"),o=e.data("autoplay"),k=e.attr(e.data("titleattr"))||"",e===w&&c.addClass("animated").addClass("swipe-right"),e===y&&c.addClass("animated").addClass("swipe-left"),void c.animate({opacity:0},500,(function(){g.css("background",h),c.removeClass("animated").removeClass("swipe-left").removeClass("swipe-right").css({"margin-left":0,"margin-right":0}),"iframe"==e.data("vbtype")?G():"inline"==e.data("vbtype")?K():"ajax"==e.data("vbtype")?F():"video"==e.data("vbtype")||"vimeo"==e.data("vbtype")||"youtube"==e.data("vbtype")?J(o):(c.html('<img src="'+r+'">'),L()),E=e,q(),p=!1,I.cb_after_nav(E,O,y,w)}))))}function H(e){27===e.keyCode&&Q(),37==e.keyCode&&!0===_&&A(w),39==e.keyCode&&!0===C&&A(y)}function Q(){return!1!==I.cb_pre_close(E,O,y,w)&&(e("body").off("keydown",H).removeClass("vbox-open"),E.focus(),void g.animate({opacity:0},500,(function(){g.remove(),p=!1,I.cb_post_close()})))}function S(e){c.addClass("animated"),U=z=e.pageY,V=R=e.pageX,D=!0}function T(e){if(!0===D){R=e.pageX,z=e.pageY,Y=R-V,j=z-U;var o=Math.abs(Y);o>Math.abs(j)&&100>=o&&(e.preventDefault(),c.css("margin-left",Y))}}function Z(e){if(!0===D){D=!1;var o=E,t=!1;0>(X=R-V)&&!0===C&&(o=y,t=!0),X>0&&!0===_&&(o=w,t=!0),Math.abs(X)>=W&&!0===t?A(o):c.css({"margin-left":0,"margin-right":0})}}function F(){e.ajax({url:r,cache:!1}).done((function(e){c.html('<div class="vbox-inline">'+e+"</div>"),L()})).fail((function(){c.html('<div class="vbox-inline"><p>Error retrieving contents, please retry</div>'),ee()}))}function G(){c.html('<iframe class="venoframe" src="'+r+'"></iframe>'),ee()}function J(e){var o,t=function(e){if(e.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),RegExp.$3.indexOf("youtu")>-1)var o="youtube";else if(RegExp.$3.indexOf("vimeo")>-1)o="vimeo";return{type:o,id:RegExp.$6}}(r),a=(e?"?rel=0&autoplay=1":"?rel=0")+function(e){var o="",t=decodeURIComponent(e),a=t.split("?");if(void 0!==a[1]){var i,s,n=a[1].split("&");for(s=0;s<n.length;s++)o=o+"&"+(i=n[s].split("="))[0]+"="+i[1]}return encodeURI(o)}(r);"vimeo"==t.type?o="https://player.vimeo.com/video/":"youtube"==t.type&&(o="https://www.youtube.com/embed/"),c.html('<iframe class="venoframe vbvid" webkitallowfullscreen mozallowfullscreen allowfullscreen frameborder="0" src="'+o+t.id+a+'"></iframe>'),ee()}function K(){c.html('<div class="vbox-inline">'+e(r).html()+"</div>"),ee()}function L(){(N=c.find("img")).length?N.each((function(){e(this).one("load",(function(){ee()}))})):ee()}function ee(){i.html(k),c.find(">:first-child").addClass("figlio").css({width:l,height:v,padding:s,background:t}),e("img.figlio").on("dragstart",(function(e){e.preventDefault()})),oe(),c.animate({opacity:"1"},"slow",(function(){}))}function oe(){var o=c.outerHeight(),t=e(window).height();m=t>o+60?(t-o)/2:"30px",c.css("margin-top",m),c.css("margin-bottom",m),I.cb_post_resize()}if((E=e(this)).data("venobox"))return!0;$.VBclose=function(){Q()},E.addClass("vbox-item"),E.data("framewidth",I.framewidth),E.data("frameheight",I.frameheight),E.data("border",I.border),E.data("bgcolor",I.bgcolor),E.data("numeratio",I.numeratio),E.data("infinigall",I.infinigall),E.data("overlaycolor",I.overlayColor),E.data("titleattr",I.titleattr),E.data("venobox",!0),E.on("click",(function(u){if(u.preventDefault(),E=e(this),!1===I.cb_pre_open(E))return!1;switch($.VBnext=function(){A(y)},$.VBprev=function(){A(w)},h=E.data("overlay")||E.data("overlaycolor"),l=E.data("framewidth"),v=E.data("frameheight"),o=E.data("autoplay")||I.autoplay,s=E.data("border"),t=E.data("bgcolor"),C=!1,_=!1,p=!1,r=E.data("href")||E.attr("href"),d=E.data("css")||"",k=E.attr(E.data("titleattr"))||"",B='<div class="vbox-preloader">',I.spinner){case"rotating-plane":B+='<div class="sk-rotating-plane"></div>';break;case"double-bounce":B+='<div class="sk-double-bounce"><div class="sk-child sk-double-bounce1"></div><div class="sk-child sk-double-bounce2"></div></div>';break;case"wave":B+='<div class="sk-wave"><div class="sk-rect sk-rect1"></div><div class="sk-rect sk-rect2"></div><div class="sk-rect sk-rect3"></div><div class="sk-rect sk-rect4"></div><div class="sk-rect sk-rect5"></div></div>';break;case"wandering-cubes":B+='<div class="sk-wandering-cubes"><div class="sk-cube sk-cube1"></div><div class="sk-cube sk-cube2"></div></div>';break;case"spinner-pulse":B+='<div class="sk-spinner sk-spinner-pulse"></div>';break;case"three-bounce":B+='<div class="sk-three-bounce"><div class="sk-child sk-bounce1"></div><div class="sk-child sk-bounce2"></div><div class="sk-child sk-bounce3"></div></div>';break;case"cube-grid":B+='<div class="sk-cube-grid"><div class="sk-cube sk-cube1"></div><div class="sk-cube sk-cube2"></div><div class="sk-cube sk-cube3"></div><div class="sk-cube sk-cube4"></div><div class="sk-cube sk-cube5"></div><div class="sk-cube sk-cube6"></div><div class="sk-cube sk-cube7"></div><div class="sk-cube sk-cube8"></div><div class="sk-cube sk-cube9"></div></div>'}return B+="</div>",P='<a class="vbox-next">'+I.htmlNext+'</a><a class="vbox-prev">'+I.htmlPrev+"</a>",M='<div class="vbox-title"></div><div class="vbox-num">0/0</div><div class="vbox-close">'+I.htmlClose+"</div>",n='<div class="vbox-overlay '+d+'" style="background:'+h+'">'+B+'<div class="vbox-container"><div class="vbox-content"></div></div>'+M+P+"</div>",e("body").append(n).addClass("vbox-open"),e(".vbox-preloader .sk-child, .vbox-preloader .sk-rotating-plane, .vbox-preloader .sk-rect, .vbox-preloader .sk-cube, .vbox-preloader .sk-spinner-pulse").css("background-color",I.spinColor),g=e(".vbox-overlay"),e(".vbox-container"),c=e(".vbox-content"),a=e(".vbox-num"),(i=e(".vbox-title")).css(I.titlePosition,"-1px"),i.css({color:I.titleColor,"background-color":I.titleBackground}),e(".vbox-close").css({color:I.closeColor,"background-color":I.closeBackground}),e(".vbox-num").css(I.numerationPosition,"-1px"),e(".vbox-num").css({color:I.numerationColor,"background-color":I.numerationBackground}),e(".vbox-next span, .vbox-prev span").css({"border-top-color":I.arrowsColor,"border-right-color":I.arrowsColor}),c.html(""),c.css("opacity","0"),g.css("opacity","0"),q(),g.animate({opacity:1},250,(function(){"iframe"==E.data("vbtype")?G():"inline"==E.data("vbtype")?K():"ajax"==E.data("vbtype")?F():"video"==E.data("vbtype")||"vimeo"==E.data("vbtype")||"youtube"==E.data("vbtype")?J(o):(c.html('<img src="'+r+'">'),L()),I.cb_post_open(E,O,y,w)})),e("body").keydown(H),e(".vbox-prev").on("click",(function(){A(w)})),e(".vbox-next").on("click",(function(){A(y)})),!1}));var te=".vbox-overlay";I.overlayClose||(te=".vbox-close"),e(document).on("click",te,(function(o){(e(o.target).is(".vbox-overlay")||e(o.target).is(".vbox-content")||e(o.target).is(".vbox-close")||e(o.target).is(".vbox-preloader"))&&Q()})),V=0,R=0,X=0,W=50,D=!1;var ae={DOWN:"touchmousedown",UP:"touchmouseup",MOVE:"touchmousemove"},ie=function(o){var t;switch(o.type){case"mousedown":t=ae.DOWN;break;case"mouseup":case"mouseout":t=ae.UP;break;case"mousemove":t=ae.MOVE;break;default:return}var a=ne(t,o,o.pageX,o.pageY);e(o.target).trigger(a)},se=function(o){var t;switch(o.type){case"touchstart":t=ae.DOWN;break;case"touchend":t=ae.UP;break;case"touchmove":t=ae.MOVE;break;default:return}var a,i=o.originalEvent.touches[0];a=t==ae.UP?ne(t,o,null,null):ne(t,o,i.pageX,i.pageY),e(o.target).trigger(a)},ne=function(o,t,a,i){return e.Event(o,{pageX:a,pageY:i,originalEvent:t})};"ontouchstart"in window?(e(document).on("touchstart",se),e(document).on("touchmove",se),e(document).on("touchend",se)):(e(document).on("mousedown",ie),e(document).on("mouseup",ie),e(document).on("mouseout",ie),e(document).on("mousemove",ie)),e(window).resize((function(){e(".vbox-content").length&&setTimeout(oe(),800)}))}))}})}(jQuery);